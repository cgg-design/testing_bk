pipeline {
  agent any
  stages {
    stage('Smoke') {
      steps {
              bat '''
              pip install pytest
              cd Py_Fixtures
              python -m pytest -v test_smoke01.py
              cd ..\\
              '''
        catchError(message:'Fail build smoke testing',buildResult:'FAILURE',stageResult:'UNSTABLE') 
        {
          sh 'exit 1'
        }
      }
    }
    stage('Build') {
      steps {
              bat '''
              cd Py_Fixtures
              python -m pytest -v test_module01.py
              cd ..\\
              '''
      }
    }
  }
}
